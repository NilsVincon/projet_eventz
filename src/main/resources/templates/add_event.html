<!doctype html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8"/>
    <title>Ajoutez votre événement</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        textarea {
            max-height: 220px;
            resize: vertical;
        }

        .hidden {
            display: none;
        }

        .active {
            display: block;
        }

        .border-red-500 {
            border-color: #f56565;
        }
    </style>
</head>
<body class="h-screen flex items-center justify-center bg-gradient-to-r from-blue-400 to-purple-600">
<div class="max-w-xl w-full bg-white p-8 rounded-lg shadow-lg">
    <div class="text-2xl font-semibold text-center mb-4">Ajoutez des événements !</div>
    <form id="registrationForm" action="/eventz/evenement/add" method="post" enctype="multipart/form-data">
        <!-- Step 1 -->
        <div class="step active">
            <div class="mb-4">
                <label for="nom_evenement" class="block text-sm font-medium text-gray-700">Nom Evenement*</label>
                <input type="text" id="nom_evenement" name="nom_evenement" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="description_evenement" class="block text-sm font-medium text-gray-700">Description</label>
                <textarea id="description_evenement" name="description_evenement" required rows="4" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"></textarea>
            </div>
            <div class="mb-4">
                <label for="description_type_evenement" class="block text-sm font-medium text-gray-700">Type Evenement*</label>
                <input type="text" id="description_type_evenement" name="description_type_evenement" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="debut_evenement" class="block text-sm font-medium text-gray-700">Date de Début*</label>
                <input type="date" id="debut_evenement" name="debut_evenement" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="fin_evenement" class="block text-sm font-medium text-gray-700">Date de Fin*</label>
                <input type="date" id="fin_evenement" name="fin_evenement" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="flex justify-end">
                <button type="button" onclick="nextStep()" class="px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">Suivant</button>
            </div>
        </div>
        <!-- Step 2 -->
        <div class="step hidden">
            <div class="mb-4">
                <label for="nb_place_evenement" class="block text-sm font-medium text-gray-700">Nombre de place</label>
                <input type="number" id="nb_place_evenement" name="nb_place_evenement" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="prix_evenement" class="block text-sm font-medium text-gray-700">Prix evenement</label>
                <input type="number" id="prix_evenement" name="prix_evenement" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <span class="block text-sm font-medium text-gray-700">Événement Privé / Public</span>
                <div class="flex items-center mt-2">
                    <button id="privateEvenementBtn" type="button" onclick="toggleEventPrivacy(true)" class="flex items-center cursor-pointer bg-red-500 text-white px-3 py-2 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"/>
                        </svg>
                        Privé
                    </button>
                    <button id="publicEvenementBtn" type="button" onclick="toggleEventPrivacy(false)" class="flex items-center cursor-pointer bg-green-500 text-white px-3 py-2 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ml-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"/>
                        </svg>
                        Public
                    </button>
                </div>
            </div>
            <div class="flex justify-between">
                <button type="button" onclick="previousStep()" class="px-4 py-2 bg-gray-600 text-white rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">Précédent</button>
                <button type="button" onclick="nextStep()" class="px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">Suivant</button>
            </div>
        </div>
        <!-- Step 3 -->
        <div class="step hidden">
            <div class="mb-4">
                <label for="numero_adresse" class="block text-sm font-medium text-gray-700">N°</label>
                <input type="text" id="numero_adresse" name="numero_adresse" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="rue_adresse" class="block text-sm font-medium text-gray-700">Rue</label>
                <input type="text" id="rue_adresse" name="rue_adresse" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="ville_adresse" class="block text-sm font-medium text-gray-700">Ville</label>
                <input type="text" id="ville_adresse" name="ville_adresse" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label for="cp_adresse" class="block text-sm font-medium text-gray-700">Code Postal</label>
                <input type="number" id="cp_adresse" name="cp_adresse" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
            </div>
            <div class="mb-4">
                <label
                        for="pays_adresse"
                        class="block text-sm font-medium text-gray-700"
                >Pays</label
                >
                <input
                        type="text"
                        id="pays_adresse"
                        name="pays_adresse"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"
                />
            </div>
            <div class="mb-4">
            <span class="block text-sm font-medium text-gray-700"
            >Adresse Privée / Publique</span
            >
                <div class="flex items-center mt-2">
                    <button
                            id="privateAdresseBtn"
                            type="button"
                            onclick="toggleAdressePrivacy(true)"
                            class="flex items-center cursor-pointer bg-red-500 text-white px-3 py-2 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                             stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"/>
                        </svg>
                        Privé
                    </button>
                    <button
                            id="publicAdresseBtn"
                            type="button"
                            onclick="toggleAdressePrivacy(false)"
                            class="flex items-center cursor-pointer bg-green-500 text-white px-3 py-2 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ml-4"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                             stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"/>
                        </svg>
                        Public
                    </button>
                </div>
            </div>
            <div class="flex justify-between">
                <button
                        type="button"
                        onclick="previousStep()"
                        class="px-4 py-2 bg-gray-600 text-white rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
                >
                    Précédent
                </button>
                <button
                        type="button"
                        onclick="nextStep()"
                        id="step3Button"
                        class="px-4 py-2 bg-gray-600 text-white rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
                >
                    Passer
                </button>
            </div>
        </div>
        <!-- Step 4 -->
        <div class="step hidden">
            <div class="mb-4">
                <label for="pdpEvenementMultiPart" class="block text-sm font-medium text-gray-700">Ajouter photo de couverture</label>
                <input type="file" id="pdpEvenementMultiPart" name="pdpEvenementMultiPart" accept="image/*"
                       class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"/>
                <img src="" id="evenementImage" alt>
            </div>
            <div class="mb-4">
                <button type="button"
                        class="px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                    Créer une playlist
                </button>
            </div>
            <div class="mb-4">
                <button type="button"
                        class="px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                    Créer une liste de covoiturage
                </button>
            </div>
            <div class="flex justify-between">
                <button type="button" onclick="previousStep()"
                        class="px-4 py-2 bg-gray-600 text-white rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                    Précédent
                </button>
                <button type="submit"
                        class="px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                    Ajouter l'événement
                </button>
            </div>
        </div>
        <input type="hidden" id="public_evenement" name="public_evenement" value="false">
        <input type="hidden" id="public_adresse" name="public_adresse" value="false">
    </form>
</div>

<script>
    let currentStep = 0;

    function showStep(index) {
        const steps = document.querySelectorAll('.step');
        steps.forEach((step, i) => {
            step.classList.toggle('active', i === index);
            step.classList.toggle('hidden', i !== index);
        });
    }

    function validateStep() {
        const steps = document.querySelectorAll('.step');
        const currentStepForm = steps[currentStep];
        const inputs = currentStepForm.querySelectorAll('input[required], textarea[required]');
        let isValid = true;
        inputs.forEach(input => {
            if (!input.value) {
                input.classList.add('border-red-500');
                isValid = false;
            } else {
                input.classList.remove('border-red-500');
            }
        });

        return isValid;
    }

    const step3Inputs = document.querySelectorAll('.step:nth-child(3) input');
    step3Inputs.forEach(input => {
        input.addEventListener('input', function() {
            const isAnyInputFilled = Array.from(step3Inputs).some(input => input.value.trim().length > 0);
            const step3Button = document.getElementById('step3Button');
            step3Button.textContent = isAnyInputFilled ? 'Continuer' : 'Passer';
            step3Button.classList.toggle('bg-purple-600', isAnyInputFilled);
            step3Button.classList.toggle('bg-gray-600', !isAnyInputFilled);
            step3Inputs.forEach(input => {
                if (isAnyInputFilled) {
                    input.setAttribute('required', true);
                } else {
                    input.removeAttribute('required');
                }
            });
        });
    });


    function nextStep() {
        if (validateStep()) {
            currentStep = Math.min(currentStep + 1, document.querySelectorAll('.step').length - 1);
            showStep(currentStep);
        }
    }

    function previousStep() {
        currentStep = Math.max(currentStep - 1, 0);
        showStep(currentStep);
    }

    function toggleEventPrivacy(isPrivate) {
        const publicEventInput = document.getElementById("public_evenement");
        if (isPrivate) {
            publicEventInput.value = "false";
            document.getElementById("privateEvenementBtn").classList.add("bg-red-500");
            document.getElementById("privateEvenementBtn").classList.remove("bg-gray-300");
            document.getElementById("publicEvenementBtn").classList.add("bg-gray-300");
            document.getElementById("publicEvenementBtn").classList.remove("bg-green-500");
        } else {
            publicEventInput.value = "true";
            document.getElementById("privateEvenementBtn").classList.remove("bg-red-500");
            document.getElementById("privateEvenementBtn").classList.add("bg-gray-300");
            document.getElementById("publicEvenementBtn").classList.remove("bg-gray-300");
            document.getElementById("publicEvenementBtn").classList.add("bg-green-500");
        }
    }

    function toggleAdressePrivacy(isPrivate) {
        const publicAdresseInput = document.getElementById("public_adresse");
        if (isPrivate) {
            publicAdresseInput.value = "false";
            document.getElementById("privateAdresseBtn").classList.add("bg-red-500");
            document.getElementById("privateAdresseBtn").classList.remove("bg-gray-300");
            document.getElementById("publicAdresseBtn").classList.add("bg-gray-300");
            document.getElementById("publicAdresseBtn").classList.remove("bg-green-500");
        } else {
            publicAdresseInput.value = "true";
            document.getElementById("privateAdresseBtn").classList.remove("bg-red-500");
            document.getElementById("privateAdresseBtn").classList.add("bg-gray-300");
            document.getElementById("publicAdresseBtn").classList.remove("bg-gray-300");
            document.getElementById("publicAdresseBtn").classList.add("bg-green-500");
        }
    }

    document.getElementById('registrationForm').addEventListener('submit', function(event) {
        if (!validateStep()) {
            event.preventDefault();
        }
    });

    showStep(currentStep);
</script>

</body>
</html>
