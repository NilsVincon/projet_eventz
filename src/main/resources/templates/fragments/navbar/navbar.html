<nav th:fragment="nav" class=" w-full z-20 top-0 start-0">
    <link href="../../output.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&display=swap" rel="stylesheet">

    <style>
        nav {
            top: 0;
            width: 100%;
            z-index: 1000;
        }


        @import url('https://fonts.googleapis.com/css2?family=Dela+Gothic+One&display=swap');
        nav {
            font-family: 'Dela Gothic One', sans-serif;
        }

        #wrapper {
            padding-left: 0;
            transition: all 0.5s ease;
        }

        #wrapper.toggled {
            padding-left: 350px;
        }

        #sidebar-wrapper {
            position: fixed;
            top: 0;
            left: 350px;
            width: 0;
            height: 100vh;
            background-color: rgba(79, 24, 136, 0.59);
            z-index: 1000;
            overflow-y: auto;
            transition: width 0.5s ease;
        }

        #sidebar-wrapper {
            box-shadow: inset -1px 0px 0px 0px #DDDDDD;
        }

        #wrapper.toggled #sidebar-wrapper {
            width: 350px;
        }

        #page-content-wrapper {
            width: 100%;
            position: absolute;
            padding: 15px;
        }

        #wrapper.toggled #page-content-wrapper {
            position: absolute;
            margin-right: -350px;
        }

        .sidebar-nav {
            position: absolute;
            top: 0;
            width: 350px;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .sidebar-nav li {
            text-indent: 20px;
            line-height: 40px;
        }

        .sidebar-nav li a {
            display: block;
            text-decoration: none;
            color: #999999;
        }

        .sidebar-nav li a:hover {
            text-decoration: none;
        }

        .sidebar-nav li a:active,
        .sidebar-nav li a:focus {
            text-decoration: none;
        }

        .sidebar-nav > .sidebar-brand {
            height: 65px;
            font-size: 18px;
            line-height: 60px;
        }

        .sidebar-nav > .sidebar-brand a {
            color: #999999;
        }

        .sidebar-nav > .sidebar-brand a:hover {
            color: #fff;
            background: none;
        }

        @media (min-width: 768px) {
            #wrapper {
                padding-left: 0;
                transition: all 0.5s ease;
            }

            #wrapper.toggled {
                padding-left: 350px;
            }

            #sidebar-wrapper {
                z-index: 1000;
                position: fixed;
                left: 350px;
                width: 0;
                height: 100%;
                margin-left: -350px;
                overflow-y: auto;
                background-color: rgba(79, 24, 136, 0.59);
                transition: all 0.5s ease;
            }

            #sidebar-wrapper {
                box-shadow: inset -1px 0px 0px 0px #DDDDDD;
            }

            #wrapper.toggled #sidebar-wrapper {
                width: 350px;
            }

            #page-content-wrapper {
                width: 100%;
                position: absolute;
                padding: 15px;
            }

            #wrapper.toggled #page-content-wrapper {
                position: absolute;
                margin-right: -350px;
            }

            .sidebar-nav {
                position: absolute;
                top: 0;
                width: 350px;
                margin: 0;
                padding: 0;
                list-style: none;
            }

            .sidebar-nav li {
                text-indent: 20px;
                line-height: 40px;
            }

            .sidebar-nav li a {
                display: block;
                text-decoration: none;
                color: #999999;
            }

            .sidebar-nav li a:hover {
                text-decoration: none;
            }

            .sidebar-nav li a:active,
            .sidebar-nav li a:focus {
                text-decoration: none;
            }

            .sidebar-nav > .sidebar-brand {
                height: 65px;
                font-size: 18px;
                line-height: 60px;
            }

            .sidebar-nav > .sidebar-brand a {
                color: #999999;
            }

            .sidebar-nav > .sidebar-brand a:hover {
                color: #fff;
                background: none;
            }

            @media (min-width: 768px) {
                #wrapper {
                    padding-left: 350px;
                }

                #wrapper.toggled {
                    padding-left: 0;
                }

                #sidebar-wrapper {
                    width: 350px;
                }

                #wrapper.toggled #sidebar-wrapper {
                    width: 0;
                }

                #page-content-wrapper {
                    padding: 20px;
                    position: relative;
                }

                #wrapper.toggled #page-content-wrapper {
                    position: relative;
                    margin-right: 0;
                }
            }

            .sidebar-brand {
                padding: 18px 0px;
                margin: 0 20px;
            }

            .navbar .navbar-nav > li > a p {
                display: inline-block;
                margin: 0;
            }

            p {
                font-size: 16px;
                line-height: 1.4em;
            }

            .btn-menu {
                border-radius: 3px;
                padding: 4px 12px;
                margin: 5px 5px 5px 0;
                font-size: 14px;
                float: left;
            }


            .chat-app .people-list {
                width: 380px;
                position: absolute;
                left: 0;
                top: 0;
                padding: 20px;
                z-index: 7
            }

            .chat-app .chat {
                margin-left: 380px;
                border-left: 1px solid #eaeaea
            }

            .people-list {
                -moz-transition: .5s;
                -o-transition: .5s;
                -webkit-transition: .5s;
                transition: .5s
            }

            .people-list .chat-list li {
                padding: 10px 15px;
                list-style: none;
                border-radius: 3px
            }

            .people-list .chat-list li:hover {
                background: #efefef;
                cursor: pointer
            }

            .people-list .chat-list li.active {
                background: #efefef
            }

            .people-list .chat-list li .name {
                font-size: 15px
            }

            .people-list .chat-list img {
                width: 45px;
                border-radius: 50%
            }

            .people-list img {
                float: left;
                border-radius: 50%
            }

            .people-list .about {
                float: left;
                padding-left: 8px
            }

            .people-list .status {
                color: #999;
                font-size: 13px
            }

            .chat .chat-header {
                padding: 15px 20px;
                border-bottom: 2px solid #f4f7f6
            }

            .chat .chat-header img {
                float: left;
                border-radius: 40px;
                width: 40px
            }

            .chat .chat-header .chat-about {
                float: left;
                padding-left: 10px
            }

            .chat .chat-history {
                padding: 20px;
                border-bottom: 2px solid #fff
            }

            .chat .chat-history ul {
                padding: 0
            }

            .chat .chat-history ul li {
                list-style: none;
                margin-bottom: 30px
            }

            .chat .chat-history ul li:last-child {
                margin-bottom: 0px
            }

            .chat .chat-history .message-data {
                margin-bottom: 15px
            }

            .chat .chat-history .message-data img {
                border-radius: 40px;
                width: 40px
            }

            .chat .chat-history .message-data-time {
                color: #434651;
                padding-left: 6px
            }

            .chat .chat-history .message {
                color: #444;
                padding: 18px 20px;
                line-height: 26px;
                font-size: 16px;
                border-radius: 7px;
                display: inline-block;
                position: relative
            }


            .chat .chat-history .my-message {
                background: #efefef
            }


            .chat .chat-history .other-message {
                background: #e8f1f3;
                text-align: right
            }


            .chat .chat-message {
                padding: 20px
            }

            .online,
            .offline,
            .me {
                margin-right: 2px;
                font-size: 8px;
                vertical-align: middle
            }

            .online {
                color: #86c541
            }

            .offline {
                color: #e47297
            }

            .me {
                color: #1d8ecd
            }

            .float-right {
                float: right
            }

            @media only screen and (max-width: 767px) {
                .chat-app .people-list {
                    height: 465px;
                    width: 100%;
                    overflow-x: auto;
                    background: #fff;
                    left: -400px;
                    display: none
                }

                .chat-app .people-list.open {
                    left: 0
                }

                .chat-app .chat {
                    margin: 0
                }

                .chat-app .chat .chat-header {
                    border-radius: 0.55rem 0.55rem 0 0
                }

                .chat-app .chat-history {
                    height: 300px;
                    overflow-x: auto
                }
            }

            @media only screen and (min-width: 768px) and (max-width: 992px) {
                .chat-app .chat-list {
                    height: 650px;
                    overflow-x: auto
                }

                .chat-app .chat-history {
                    height: 600px;
                    overflow-x: auto
                }
            }

            @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 1) {
                .chat-app .chat-list {
                    height: 480px;
                    overflow-x: auto
                }

                .chat-app .chat-history {
                    height: calc(100vh - 350px);
                    overflow-x: auto
                }
            }
        }
    </style>
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
        <div class="flex items-center space-x-4 rtl:space-x-reverse">
            <div id="wrapper" class="wrapper-content toggled">
                <div id="sidebar-wrapper">
                    <ul class="sidebar-nav">
                        <div class="h-full w-full mr-2 ml-3 mt-2">
                            <div class="relative">
                                <input type="search" id="default-search"
                                       class="mt-10 block w-11/12 h-10 p-4 pr-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-purple-500 focus:border-purple-500 dark:bg-purple-700 dark:border-purple-600 dark:placeholder-purple-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-purple-500"
                                       placeholder="Recherche..." required/>
                            </div>
                        </div>
                        <div id="plist" class="people-list">
                            <ul class="list-unstyled w-11/12 ml-3 mt-4 mb-0 shadow-2xl rounded-2xl bg-gray-50 bg-opacity-75">
                                <li class="clearfix active" data-name="Général Chat">
                                    <a href="/eventz/generalchat">
                                        <img class="rounded ml-2 mt-2 mb-2 h-24 w-24" th:src="@{/images/Eventz.png}"
                                             alt="avatar"
                                             id="eventz-logog"/>
                                        <div class="about">
                                            <div class="name font-bold text-l mt-4 text-gray-700">Général Chat</div>
                                            <div class="status "><i class="fa fa-circle online"></i>
                                                <span class="text-gray-600">en ligne...</span>

                                            </div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                            <ul class="list-unstyled w-11/12 ml-3 mt-4 mb-0 shadow-2xl rounded-2xl bg-gray-50 bg-opacity-75"
                                th:if="${evenementsparticipe != null}"
                                th:each="evenement : ${evenementsparticipe}">
                                <li class="clearfix active" th:data-name="${evenement.nom_evenement}">
                                    <a th:href="@{'/eventz/eventchat/' + ${evenement.idEvenement}}">
                                        <img class="ml-2 mt-2 mb-2 h-24 w-24 rounded"
                                             th:src="${evenement.hasPdp() ? '/eventz/evenement/image/' + evenement.idEvenement : 'https://www.bootdey.com/image/450x280/87CEFA/000000'}"
                                             alt="avatar">
                                        <div class="about">
                                            <div class="name font-bold text-gray-700 text-l mt-4"
                                                 th:text="${evenement.nom_evenement} + ' '+ Chat"></div>
                                            <div class="status text-gray-600"><i class="fa fa-circle online"></i>en ligne...
                                            </div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </ul>
                </div>
            </div>
            <button class="btn-menu btn btn-toggle-menu focus:ring-purple-300 focus:ring-2" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                     stroke="currentColor" class="w-7 h-7 text-red-50 opacity-70">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"/>
                </svg>
            </button>
            <a href="/eventz/home" class="hover:no-underline flex items-center">
                <img th:src="@{/images/Eventz.png}" class="h-16" alt="Eventz Logo" id="eventz-logo"/>
                <span class="hover:text-purple-400 ml-1 self-center text-2xl whitespace-nowrap text-purple-100">Eventz</span>
            </a>
        </div>
        <div class="flex items-center md:order-2 space-x-8 rtl:space-x-reverse">
            <button th:if="${connecte}" onclick="window.location.href='/eventz/evenement/add'"
                    class="text-purple-100 bg-gradient-to-br from-purple-900 to-purple-600 hover:bg-gradient-to-br hover:from-purple-600 hover:to-purple-900 focus:ring-2 focus:ring-purple-900 font-medium rounded-lg text-lg px-4 py-2 text-center dark:bg-purple-900 dark:hover:bg-purple-700 dark:focus:ring-purple-800">
                Nouvel Eventz
            </button>

            <button th:if="${connecte}" onclick="window.location.href='/eventz/evenement/list'"
                    class="text-purple-100 no-underline bg-gradient-to-br from-purple-900 to-purple-600 hover:bg-gradient-to-br hover:from-purple-600 hover:to-purple-900 focus:ring-2 focus:ring-purple-900 font-medium rounded-lg text-lg px-4 py-2 text-center dark:bg-purple-900 dark:hover:bg-purple-700 dark:focus:ring-purple-800">
                Mes Eventz
            </button>
            <div th:if="${connecte}" class="relative inline-block text-left">
                <a href="/eventz/user/profil" id="profil"
                   class="inline-flex items-center self-center text-2xl text-purple-100 font-semibold whitespace-nowrap dark:text-white">
                    <div class="h-16 w-16 rounded-full overflow-hidden flex items-center justify-center">
                        <img th:src="@{'/eventz/user/profile-image/' + ${user.id_utilisateur}}" alt="profil"
                             class="h-full w-full object-cover">
                    </div>
                </a>
                <div class="absolute right-0 z-10 mt-2 hidden w-56 divide-y divide-gray-100 rounded-md border border-gray-100 bg-white shadow-lg"
                     id="profilDropdown" role="menu">
                    <div class="p-2 menu-items">
                        <a href="/eventz/user/profil"
                           class="block rounded-lg px-4 py-2 text-sm text-purple-950 hover:bg-purple-50 hover:text-purple-700 hover:no-underline"
                           role="menuitem">Profil</a>
                        <a href="/eventz/friend/add"
                           class="block rounded-lg px-4 py-2 text-sm text-purple-950 hover:bg-purple-50 hover:text-purple-700 hover:no-underline"
                           role="menuitem">Amis</a>
                        <a href="/eventz/artiste/add_artiste"
                           class="block rounded-lg px-4 py-2 text-sm text-purple-950 hover:bg-purple-50 hover:text-purple-700 hover:no-underline"
                           role="menuitem">Artiste</a>
                        <a href="/eventz/user/profil#settings"
                           class="block rounded-lg px-4 py-2 text-sm text-purple-950 hover:bg-purple-50 hover:text-purple-700 hover:no-underline"
                           role="menuitem">Paramètres</a>
                    </div>
                    <div class="p-2">
                        <form method="GET" action="/eventz/auth/logout">
                            <button type="submit"
                                    class="flex w-full items-center gap-2 rounded-lg px-4 py-2 text-sm text-red-700 hover:bg-red-50"
                                    role="menuitem">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                                     viewBox="0 0 24 24"
                                     stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                </svg>
                                Déconnexion
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            <div th:unless="${connecte}">
                <a href="/eventz/auth/login">
                    <button type="button" id="login"
                            class="text-purple-100 bg-gradient-to-br from-purple-900 to-purple-600 hover:bg-gradient-to-br hover:from-purple-600 hover:to-purple-900 focus:ring-2 focus:ring-purple-900 font-medium rounded-lg text-lg px-4 py-2 text-center dark:bg-purple-900 dark:hover:bg-purple-700 dark:focus:ring-purple-800">
                        Se connecter
                    </button>
                </a>
            </div>
            <button data-collapse-toggle="navbar-sticky" type="button"
                    class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                    aria-controls="navbar-sticky" aria-expanded="false">
                <span class="sr-only">Open main menu</span>
                <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                     viewBox="0 0 17 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M1 1h15M1 7h15M1 13h15"/>
                </svg>
            </button>
        </div>

    </div>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(function () {
            $(".btn-toggle-menu").click(function () {
                $("#wrapper").toggleClass("toggled");
            });
        })
        document.addEventListener('DOMContentLoaded', function () {
            const profilLink = document.getElementById('profil');
            const dropdown = profilLink.nextElementSibling;

            profilLink.addEventListener('mouseenter', function () {
                dropdown.classList.remove('hidden');
            });

            profilLink.addEventListener('mouseleave', function () {
                setTimeout(function () {
                    dropdown.classList.add('hidden');
                }, 2000);
            });

            dropdown.addEventListener('mouseenter', function () {
                dropdown.classList.remove('hidden');
            });

            dropdown.addEventListener('mouseleave', function () {
                dropdown.classList.add('hidden');
            });
        });

        const searchBar = document.getElementById('default-search');
        const listItems = document.querySelectorAll('.people-list li');

        searchBar.addEventListener('input', function(event) {
            const searchTerm = event.target.value.toLowerCase();

            listItems.forEach(item => {
                const itemName = item.getAttribute('data-name').toLowerCase();
                if (itemName.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    </script>
</nav>