<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            /*background-image: url("background2.avif"); !* chemin vers votre image *!*/
            background-size: cover; /* assurez-vous que l'image couvre toute la page */
            background-position: center; /* centrer l'image */
        }

        nav {
            background-color: #e67b17;
            overflow: hidden;
            position: sticky;
            top: 0;
            z-index: 1000;
            margin-bottom: 20px; /* Ajoute une marge inférieure */
        }

        .navbar-brand {
            float: left;
            padding: 15px 50px;
            font-size: 20px;
            color: white;
            text-decoration: none;
        }

        .navbar-brand img {
            width: 60px; /* Ajustez la taille du logo selon vos besoins */
        }

        #eventz-logo {
            margin-right: 20px;
        }

        .navbar-options {
            float: right;
            padding: 15px 20px;
        }

        .navbar-options a {
            color: white;
            text-decoration: none;
            margin-left: 20px;
            font-size: 18px;
        }

        .navbar-options a:hover {
            color: #f0b8c5;
        }

        .navbar-options img {
            width: 45px;
            height: auto;
            vertical-align: middle;
        }

        .container {
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #today {
            float: left;
        }

        #today {
            position: absolute;
            top: 37px;
            left: 90px; /* Ajustez selon vos besoins */
        }

        #create {
            display: inline-block;
            padding: 10px 20px;
            background-color: #f0b8c5;
            color: white;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        #create:hover {
            background-color: #f7f8f7;
        }

        .sidebar {
            width: 250px;
            height: 100%;
            position: fixed;
            top: 0;
            left: -250px;
            background-color: #f0f0f0;
            transition: left 0.3s ease;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar ul li {
            padding: 10px 20px;
        }

        .sidebar ul li a {
            color: #f2d4d8;
            text-decoration: none;
        }

        .sidebar ul li a:hover {
            background-color: #ddd;
        }

        .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            cursor: pointer;
            z-index: 1000;
        }

        .sidebar-toggle span {
            font-size: 24px;
        }

        .transition-block {
            width: 80%; /* ajustez la largeur selon vos besoins */
            margin: 20px auto; /* espace entre les blocs et centrage horizontal */
            padding: 20px; /* ajout de marge intérieure pour le contenu */
            background-color: white; /* couleur de fond initiale */
            position: relative;
            transition: background-color 2s ease; /* durée et type de transition */
            border-radius: 10px; /* ajouter des coins arrondis */
            display: flex; /* utiliser flexbox */
            align-items: center; /* centrer verticalement */
        }

        .transition-block .content {
            display: flex; /* utiliser flexbox pour le contenu */
        }

        .transition-block img {
            width: 300px; /* ajustez la taille de l'image selon vos besoins */
            margin-right: 20px; /* espace entre l'image et le texte */
        }

        .transition-block .text {
            flex: 1;
            color: black;
        }

        .transition-block h2,
        .transition-block p {
            margin: 0;
            color: black;
        }

        .filter-container {
            top: 0;
            left: 0;
            right: 0;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            z-index: 1000;
        }

        .filter-form {
            display: flex;
            justify-content: space-between;
        }

        .filter-item {
            flex: 1;
            margin-right: 10px;
            padding: 20px;
            border-radius: 10px;
            background-color: pink; /* Ajoute un espacement entre les éléments */
        }

        .filter-item:last-child {
            margin-right: 0; /* Supprime l'espacement du dernier élément */
        }

        .filter-container input[type="submit"] {
            width: 100%; /* Utilise toute la largeur disponible */
            max-width: 200px; /* Définit une largeur maximale pour éviter que le bouton ne devienne trop large */
        }
        .footer {
            background-color: #f2f2f2;
            padding: 50px 0;
            font-size: 14px;
        }

        .footer .container {
            display: flex;
            flex-wrap: wrap;
        }

        .footer .footer-section {
            flex: 1;
            margin-right: 20px;
        }

        .footer h2 {
            font-size: 18px;
        }

        .footer ul {
            list-style: none;
            padding: 0;
        }

        .footer ul li {
            margin-bottom: 10px;
        }

        .footer .contact-form form {
            display: flex;
            flex-direction: column;
        }

        .footer .contact-form input,
        .footer .contact-form textarea {
            margin-bottom: 10px;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 20px;
        }

    </style>
    <title>Accueil</title>
</head>
<body>
<th:block th:insert="~{fragments/navbar :: nav}"></th:block>
<div class="container">
    <h1>Bienvenue sur votre site</h1>
</div>
<div class="filter-container">
    <form id="filterForm1" class="filter-form">
        <div class="filter-item">
            <label for="cityFilter1">Ville:</label>
            <input
                    type="text"
                    id="cityFilter1"
                    name="cityFilter1"
                    placeholder="Entrez une ville"
            />
        </div>
        <div class="filter-item">
            <label for="dateFilter1">Date:</label>
            <input type="date" id="dateFilter1" name="dateFilter1"/>
        </div>
        <div class="filter-item">
            <label for="soireeFilter">Type de soirée:</label>
            <select id="soireeFilter" name="soireeFilter">
                <option value="disco">Disco</option>
                <option value="techno">Techno</option>
                <option value="autre">Autre</option>
            </select>
        </div>
        <input type="submit" value="Filtrer"/>
    </form>
</div>
<table>
    <tbody>
    <tr th:each="evenement : ${evenements}">
        <td>
            <div class="transition-block">
                <div class="content">
                    <div class="text">
                        <a th:href="'/api/evenement/details?id=' + ${evenement.id_evenement}">
                            <h2 th:text="${evenement.nom_evenement}"></h2>
                            <p th:text="${evenement.description_evenement}"></p>
                        </a>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>
<div id="noResultsBlock" class="transition-block" style="display: none">
    <div class="content">
        <div class="text">
            <h2>Aucune soirée trouvée</h2>
            <p>
                Désolé, aucune soirée ne correspond aux critères de filtrage
                sélectionnés.
            </p>
        </div>
    </div>
</div>
<th:block th:insert="~{fragments/footer :: foot}"></th:block>
<div class="sidebar-toggle" onclick="toggleSidebar()">
    <span>&#9776;</span>
</div>
<aside class="sidebar" id="sidebar">
    <h2>Chat</h2>
    <ul>
        <li><a href="#">Conversation 1</a></li>
        <li><a href="#">Conversation 2</a></li>
    </ul>
</aside>
<script>
    function toggleSidebar() {
        var sidebar = document.getElementById("sidebar");
        if (sidebar.style.left === "0px") {
            sidebar.style.left = "-250px";
        } else {
            sidebar.style.left = "0px";
        }
    }

    window.addEventListener("load", function () {
        var filterForm = document.getElementById("filterForm1");
        if (filterForm) {
            filterForm.addEventListener("submit", function (event) {
                event.preventDefault(); // Empêche la soumission du formulaire par défaut

                const villeFilterInput = document.getElementById("cityFilter1");
                const dateFilterInput = document.getElementById("dateFilter1");
                const soireeFilterInput = document.getElementById("soireeFilter");

                const villeFilter = villeFilterInput.value.trim().toLowerCase();
                const dateFilter = dateFilterInput.value.trim();
                const soireeFilter = soireeFilterInput.value.trim();

                const transitionBlocks =
                    document.querySelectorAll(".transition-block");
                let anyResult = false; // Variable pour vérifier si au moins un bloc est trouvé

                transitionBlocks.forEach((block) => {
                    const ville = block.getAttribute("data-ville");
                    const date = block.getAttribute("data-date");
                    const soiree = block.getAttribute("data-soiree");

                    let villeMatch; // Déclarer la variable en dehors de la condition

                    if (ville !== null) {
                        // Si oui, appliquer la méthode toLowerCase()
                        const villeLowerCase = ville.toLowerCase();
                        villeMatch =
                            villeFilter === "" || villeLowerCase.includes(villeFilter);
                        // Utiliser la variable villeLowerCase dans les comparaisons
                    } else {
                        // Si non, considérer que le filtre sur la ville est toujours vérifié
                        villeMatch = true;
                    }

                    const dateMatch = dateFilter === "" || date === dateFilter;
                    const soireeMatch =
                        soireeFilter === "" || soiree === soireeFilter;

                    if (villeMatch && dateMatch && soireeMatch) {
                        block.style.display = "block"; // Afficher le bloc s'il correspond aux filtres
                        anyResult = true; // Indiquer qu'au moins un bloc est trouvé
                    } else {
                        block.style.display = "none"; // Masquer le bloc s'il ne correspond pas aux filtres
                    }
                });

                // Afficher ou masquer le bloc "Aucune soirée trouvée" en fonction du résultat
                const noResultsBlock = document.getElementById("noResultsBlock");
                if (anyResult) {
                    noResultsBlock.style.display = "none"; // Masquer le bloc s'il y a des résultats
                } else {
                    noResultsBlock.style.display = "block"; // Afficher le bloc s'il n'y a pas de résultats
                }
            });
        }

        var transitionBlocks = document.querySelectorAll(".transition-block");
        transitionBlocks.forEach(function (transitionBlock) {
            transitionBlock.style.backgroundColor =
                "rgb(233, 186, 206)"; /* couleur rose */
        });
    });
    document.addEventListener("DOMContentLoaded", function () {
        // Fonction pour mettre à jour la valeur de l'input date avec la date actuelle
        function updateDateInput() {
            var currentDate = new Date().toISOString().slice(0, 10); // Récupérer la date actuelle au format YYYY-MM-DD
            var dateFilterInput = document.getElementById("dateFilter1"); // Récupérer l'input date
            dateFilterInput.value = currentDate; // Mettre à jour la valeur de l'input date avec la date actuelle
        }

        var sortirCeSoirLink = document.getElementById("sortirCeSoir");
        sortirCeSoirLink.addEventListener("click", function (event) {
            updateDateInput();
            event.preventDefault();
        });
    });
</script>
</body>
</html>
